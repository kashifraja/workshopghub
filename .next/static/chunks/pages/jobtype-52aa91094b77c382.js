(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[761],{791:(e,t,s)=>{"use strict";s.d(t,{N:()=>i});let i=(0,s(156).UU)("https://dnunrkkrsltywmtoyirj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRudW5ya2tyc2x0eXdtdG95aXJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI2MDI5MDEsImV4cCI6MjA1ODE3ODkwMX0.a0zK7-4exPuoc1b9ykrMX0GeqsUwx1qATAOXiImrUqc")},3118:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/jobtype",function(){return s(3832)}])},3832:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var i=s(7876),n=s(4232),r=s(791),a=s(9099),l=s(9446);let o=()=>{let e=(0,a.useRouter)(),{user:t}=(0,l.J)();(0,n.useEffect)(()=>{t||e.push("/auth/login")},[t,e]);let[s,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,p]=(0,n.useState)(null),[h,b]=(0,n.useState)(""),[m,y]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await r.N.from("jobtype").select("*");if(t)throw t;o(e)}catch(e){p("Failed to fetch job types"),console.error(e)}finally{d(!1)}})()},[]);let j=async e=>{e.preventDefault();let{error:t}=await r.N.from("jobtype").insert([{name:h,description:m}]);t?console.error("Error adding job type:",t):(o([...s,{id:Date.now(),name:h,description:m}]),b(""),y(""))},x=async e=>{let{error:t}=await r.N.from("jobtype").delete().eq("id",e);console.log("Deleting job type with ID:",e),t?console.error("Error deleting job type:",t):o(s.filter(t=>t.id!==e))};return c?(0,i.jsx)("p",{children:"Loading..."}):u?(0,i.jsx)("p",{children:u}):(0,i.jsxs)("div",{className:"container mt-5",children:[(0,i.jsx)("button",{onClick:()=>e.push("/"),className:"btn btn-secondary mb-4",children:"Home"})," ",(0,i.jsx)("h1",{children:"Job Type Listings"}),(0,i.jsxs)("form",{onSubmit:j,children:[(0,i.jsx)("input",{type:"text",placeholder:"Job Type Name",value:h,onChange:e=>b(e.target.value),required:!0}),(0,i.jsx)("input",{type:"text",placeholder:"Description",value:m,onChange:e=>y(e.target.value),required:!0}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Job Type"})]}),(0,i.jsx)("ul",{className:"list-group",children:s.map(e=>(0,i.jsxs)("li",{className:"list-group-item",children:[(0,i.jsx)("h5",{children:e.name}),(0,i.jsxs)("p",{children:["Description: ",e.description]}),(0,i.jsx)("button",{onClick:()=>x(e.id),className:"btn btn-danger btn-sm float-end",children:"Delete"})]},e.id))})]})}},9099:(e,t,s)=>{e.exports=s(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(3118)),_N_E=e.O()}]);