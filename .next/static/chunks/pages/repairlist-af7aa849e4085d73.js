(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[419],{1754:()=>{},2284:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(7876),c=s(4232),i=s(9099),d=s(2829);s(1754);var n=s(9446);let l=()=>{let e=(0,i.useRouter)(),{user:t}=(0,n.J)();(0,c.useEffect)(()=>{t||e.push("/auth/login")},[t,e]);let[s,l]=(0,c.useState)([]),[h,a]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{try{let{data:e,error:t}=await d.N.from("repair_records").select("*");if(t)throw t;l(e)}catch(e){a(e.message)}})()},[]);let o=async e=>{try{let{error:t}=await d.N.from("repair_records").delete().eq("id",e);if(t)throw t;l(s.filter(t=>t.id!==e))}catch(e){console.error("Error deleting record:",e),alert("Failed to delete record. Please try again.")}};return h?(0,r.jsxs)("div",{children:["Error: ",h]}):(0,r.jsxs)("div",{className:"container mt-5",children:[(0,r.jsx)("h1",{className:"text-center mb-4",children:"ASIN Repair Records"}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("button",{className:"btn btn-secondary",onClick:()=>e.push("/"),children:"Home"}),(0,r.jsx)("button",{className:"btn btn-primary",onClick:()=>e.push("/record"),children:"Add Repair Record"}),(0,r.jsx)("button",{className:"btn btn-success",onClick:()=>e.push("/reports"),children:"View Reports"})]}),(0,r.jsxs)("table",{className:"table table-striped table-bordered",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Date"}),(0,r.jsx)("th",{children:"Vehicle"}),(0,r.jsx)("th",{children:"DIN"}),(0,r.jsx)("th",{children:"Color"}),(0,r.jsx)("th",{children:"Job Des"}),(0,r.jsx)("th",{children:"PL"}),(0,r.jsx)("th",{children:"PC"}),(0,r.jsx)("th",{children:"SL"}),(0,r.jsx)("th",{children:"ML"}),(0,r.jsx)("th",{children:"Paid"}),(0,r.jsx)("th",{children:"Total"}),(0,r.jsx)("th",{children:"MC"}),(0,r.jsx)("th",{children:"Shop"}),(0,r.jsx)("th",{children:"Mechanic"}),(0,r.jsx)("th",{children:"Job"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:s.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"".concat(new Date(e.date).getMonth()+1,"/").concat(new Date(e.date).getDate(),"/").concat(new Date(e.date).getFullYear().toString().slice(-2))}),(0,r.jsx)("td",{children:e.vehicleName}),(0,r.jsx)("td",{children:e.namePlate}),(0,r.jsx)("td",{children:e.color}),(0,r.jsx)("td",{children:e.jobDescription}),(0,r.jsxs)("td",{children:["$",e.partsListPrice]}),(0,r.jsxs)("td",{children:["$",e.partsCostPrice]}),(0,r.jsxs)("td",{children:["$",e.shopLabor]}),(0,r.jsxs)("td",{children:["$",e.mechanicLabor]}),(0,r.jsx)("td",{children:e.paidBy}),(0,r.jsxs)("td",{children:["$",e.total]}),(0,r.jsxs)("td",{children:["$",e.mechanicCommission]}),(0,r.jsxs)("td",{children:["$",e.shopprofit]}),(0,r.jsx)("td",{children:e.mechanic}),(0,r.jsx)("td",{children:e.jobType}),(0,r.jsx)("td",{children:(0,r.jsx)("button",{className:"btn btn-danger",onClick:()=>o(e.id),children:"Delete"})})]},e.id))})]})]})}},2564:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/repairlist",function(){return s(2284)}])},9099:(e,t,s)=>{e.exports=s(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[810,636,593,792],()=>t(2564)),_N_E=e.O()}]);